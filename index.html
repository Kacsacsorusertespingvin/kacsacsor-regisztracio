<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <title>KCSSPNR Vetélkedő</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron&display=swap');
    body { margin:0; min-height:100vh; background:#000; color:#0f0; font-family:'Orbitron',monospace; display:flex; flex-direction:column; align-items:center; padding:30px 20px; }
    h1 { font-size:3rem; color:#0ff; text-shadow:0 0 10px #0ff,0 0 20px #0ff,0 0 30px #0ff; margin-bottom:40px; text-align:center; }
    nav { display:flex; gap:20px; margin-bottom:40px; flex-wrap:wrap; justify-content:center; }
    button { background:transparent; border:2px solid #0ff; color:#0ff; padding:15px 30px; font-size:1.1rem; font-weight:700; cursor:pointer; border-radius:8px; transition:all .3s; text-transform:uppercase; letter-spacing:2px; }
    button:hover, button:focus { background:#0ff; color:#000; }
    section { display:none; background:#010101; border:2px solid #0f0; border-radius:12px; padding:30px 40px; width:100%; max-width:550px; box-shadow:0 0 20px #0f0,inset 0 0 10px #0f0; color:#0f0; flex-direction:column; }
    section.active { display:flex; }
    input[type="text"], input[type="number"], input[type="password"] { margin:5px 0 15px; padding:10px 15px; font-size:1rem; background:#000; border:2px solid #0ff; border-radius:8px; color:#0f0; box-shadow:0 0 10px #0ff inset; width:100%; }
    ul#teamList { list-style:none; padding-left:0; max-height:300px; overflow-y:auto; border:1px solid #0ff; border-radius:8px; box-shadow:0 0 10px #0ff inset; }
    ul#teamList li { padding:12px 15px; border-bottom:1px solid #0f0; }
    #welcomeMsg, #adminStatus { margin-top:25px; font-size:1.2rem; text-align:center; }
  </style>
</head>
<body>
  <h1>KCSSPNR Vetélkedő</h1>
  <nav>
    <button onclick="showSection('registerSection')">Csapat regisztrálása</button>
    <button onclick="showSection('answersSection')">Válaszok beadása</button>
    <button onclick="showSection('teamsSection')">Nevezett csapatok</button>
    <button onclick="showSection('adminSection')">Admin</button>
  </nav>

  <section id="registerSection">
    <h2>Csapat regisztrálása</h2>
    <input id="teamName" type="text" placeholder="Csapatnév" />
    <input id="member1" type="text" placeholder="Tag 1" />
    <input id="member2" type="text" placeholder="Tag 2" />
    <input id="member3" type="text" placeholder="Tag 3" />
    <input id="member4" type="text" placeholder="Tag 4" />
    <button onclick="registerTeam()">Regisztráció</button>
    <p id="welcomeMsg"></p>
  </section>

  <section id="answersSection">
    <h2>Válaszok beadása</h2>
    <input id="ans1" type="number" placeholder="Hangérzékelők" />
    <input id="ans2" type="number" placeholder="Hőkamerák" />
    <input id="ans3" type="number" placeholder="Kamerák" />
    <input id="ans4" type="number" placeholder="Mozgásérzékelők" />
    <button onclick="submitAnswers()">Mentés</button>
  </section>

  <section id="teamsSection">
    <h2>Nevezett csapatok</h2>
    <ul id="teamList"></ul>
  </section>

  <section id="adminSection">
    <h2>Admin bejelentkezés</h2>
    <input id="adminPass" type="password" placeholder="Admin jelszó" />
    <button onclick="loginAdmin()">Bejelentkezés</button>
    <p id="adminStatus"></p>
  </section>

  <script>
    const ADMIN_PASSWORD = "wPk4ibAwk";
    let isAdmin = false;

    function showSection(id) {
      localStorage.setItem('lastSection', id);
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      if (id === 'teamsSection') renderTeamList();
      if (id === 'answersSection') loadAnswers();
    }

    function registerTeam() {
      const name = document.getElementById('teamName').value.trim();
      const members = ['member1','member2','member3','member4']
        .map(i => document.getElementById(i).value.trim());
      if (!name || members.some(m => !m)) return alert('Tölts ki minden mezőt!');
      let teams = JSON.parse(localStorage.getItem('teams')||'[]');
      if (teams.find(t => t.name.toLowerCase()===name.toLowerCase())) return alert('Már van ilyen csapat!');
      teams.push({ name, members, answers: ['','','',''] });
      localStorage.setItem('teams', JSON.stringify(teams));
      localStorage.setItem('loggedTeam', name);
      document.getElementById('welcomeMsg').textContent = `Üdvözlünk titeket, ${name} csapat!`;
    }

    function loadAnswers() {
      const name = localStorage.getItem('loggedTeam');
      if (!name) return alert('Nem vagy bejelentkezve.');
      let teams = JSON.parse(localStorage.getItem('teams')||'[]');
      const t = teams.find(t => t.name === name);
      if (!t) return;
      ['ans1','ans2','ans3','ans4'].forEach((id,i) =>
        document.getElementById(id).value = t.answers[i] || ''
      );
    }

    function submitAnswers() {
      const name = localStorage.getItem('loggedTeam');
      if (!name) return alert('Nem vagy bejelentkezve.');
      let teams = JSON.parse(localStorage.getItem('teams')||'[]');
      const t = teams.find(t => t.name === name);
      if (!t) return;
      t.answers = ['ans1','ans2','ans3','ans4'].map(id =>
        document.getElementById(id).value
      );
      localStorage.setItem('teams', JSON.stringify(teams));
      alert('Mentve!');
    }

    function renderTeamList() {
      const ul = document.getElementById('teamList');
      ul.innerHTML = '';
      let teams = JSON.parse(localStorage.getItem('teams')||'[]');
      if (!teams.length) {
        ul.innerHTML = '<li>Nincs csapat.</li>';
        return;
      }
      teams.forEach((team,i) => {
        const li = document.createElement('li');
        li.innerHTML = `<strong>${team.name}</strong><br>Tagok: ${team.members.join(', ')}`;
        if (isAdmin) {
          li.innerHTML += `<br>Válaszok: ${team.answers.join(' | ')}`;
          const btn = document.createElement('button');
          btn.textContent = 'Törlés';
          btn.onclick = () => deleteTeam(i);
          li.appendChild(btn);
        }
        ul.appendChild(li);
      });
    }

    function deleteTeam(i) {
      let teams = JSON.parse(localStorage.getItem('teams')||'[]');
      teams.splice(i,1);
      localStorage.setItem('teams', JSON.stringify(teams));
      renderTeamList();
    }

    function loginAdmin() {
      if (document.getElementById('adminPass').value === ADMIN_PASSWORD) {
        isAdmin = true;
        localStorage.setItem('isAdmin','true');
        document.getElementById('adminStatus').textContent = 'Sikeres admin belépés!';
        showSection('teamsSection');
      } else {
        document.getElementById('adminStatus').textContent = 'Hibás jelszó!';
      }
    }

    window.onload = () => {
      const team = localStorage.getItem('loggedTeam');
      if (team) {
        document.getElementById('welcomeMsg').textContent = `Üdvözlünk titeket, ${team} csapat!`;
      }
      if (localStorage.getItem('isAdmin') === 'true') {
        isAdmin = true;
      }
      const last = localStorage.getItem('lastSection') || 'registerSection';
      showSection(last);
    };
  </script>
</body>
</html>

