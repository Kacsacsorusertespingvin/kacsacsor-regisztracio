<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>KCSSPNR Vetélkedő</title>
  <style>
    body { margin:0; background:#000; color:#0f0; font-family:monospace; display:flex; flex-direction:column; align-items:center; padding:20px; }
    button { margin:5px; background:transparent; border:2px solid #0ff; color:#0ff; padding:10px 20px; cursor:pointer; }
    button:hover { background:#0ff; color:#000; }
    section { display:none; margin-top:20px; width:100%; max-width:500px; }
    section.active { display:block; }
    input { display:block; width:100%; margin:8px 0; padding:8px; background:#111; border:2px solid #0ff; color:#0f0; }
    ul { list-style:none; padding:0; }
    li { background:#111; margin:8px 0; padding:8px; border:1px solid #0ff; }
    .admin-btn { margin-left:10px; background:#300; border:none; color:#f00; cursor:pointer; }
  </style>
</head>
<body>

  <h1>KCSSPNR Vetélkedő</h1>
  <nav>
    <button id="navRegister">Regisztráció</button>
    <button id="navAnswers">Válaszok</button>
    <button id="navTeams">Nevezett csapatok</button>
    <button id="navAdmin">Admin</button>
  </nav>

  <section id="registerSec">
    <h2>Csapat regisztrálása</h2>
    <input id="teamName" placeholder="Csapatnév">
    <input id="member1" placeholder="Tag 1">
    <input id="member2" placeholder="Tag 2">
    <input id="member3" placeholder="Tag 3">
    <input id="member4" placeholder="Tag 4">
    <button id="btnRegister">Regisztrálás</button>
    <p id="msgWelcome"></p>
  </section>

  <section id="answersSec">
    <h2>Válaszok beadása</h2>
    <input id="ans1" type="number" placeholder="Hangérzékelők">
    <input id="ans2" type="number" placeholder="Hőkamerák">
    <input id="ans3" type="number" placeholder="Kamerák">
    <input id="ans4" type="number" placeholder="Mozgásérzékelők">
    <button id="btnSaveAns">Mentés</button>
  </section>

  <section id="teamsSec">
    <h2>Nevezett csapatok</h2>
    <ul id="teamList"></ul>
  </section>

  <section id="adminSec">
    <h2>Admin bejelentkezés</h2>
    <input id="adminPw" type="password" placeholder="Admin jelszó">
    <button id="btnAdminLogin">Belépés</button>
    <p id="msgAdmin"></p>
  </section>

<script>
  const ADMIN_PW = "wPk4ibAwk";
  let isAdmin = false;

  // navigáció
  document.getElementById('navRegister').onclick = ()=>show('registerSec');
  document.getElementById('navAnswers').onclick = ()=>show('answersSec');
  document.getElementById('navTeams').onclick = ()=>{ show('teamsSec'); loadTeams(); };
  document.getElementById('navAdmin').onclick = ()=>show('adminSec');

  function show(id){
    ['registerSec','answersSec','teamsSec','adminSec'].forEach(s=>document.getElementById(s).classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  // regisztráció
  document.getElementById('btnRegister').onclick = ()=>{
    const name = document.getElementById('teamName').value.trim();
    const members = [1,2,3,4].map(i=>document.getElementById('member'+i).value.trim());
    if(!name||members.some(m=>!m)){ alert('Töltsd ki az összes mezőt!'); return; }
    let teams = JSON.parse(localStorage.getItem('teams')||'[]');
    if(teams.find(t=>t.name===name)){ alert('Ez a név már foglalt!'); return; }
    teams.push({name,members,answers:['','','','']});
    localStorage.setItem('teams', JSON.stringify(teams));
    localStorage.setItem('logged', name);
    document.getElementById('msgWelcome').textContent = `Üdvözlünk, ${name}!`;
  };

  // válasz mentés
  document.getElementById('btnSaveAns').onclick = ()=>{
    const name = localStorage.getItem('logged');
    if(!name){ alert('Regisztrálj előbb!'); return; }
    let teams = JSON.parse(localStorage.getItem('teams')||'[]');
    const t = teams.find(t=>t.name===name);
    t.answers = [1,2,3,4].map(i=>document.getElementById('ans'+i).value);
    localStorage.setItem('teams', JSON.stringify(teams));
    alert('Elmentve!');
  };

  // csapatok listázása
  function loadTeams(){
    const ul = document.getElementById('teamList');
    ul.innerHTML = '';
    let teams = JSON.parse(localStorage.getItem('teams')||'[]');
    if(teams.length===0){ ul.innerHTML='<li>— nincs csapat —</li>'; return; }
    teams.forEach((t,i)=>{
      const li = document.createElement('li');
      li.innerHTML = `<strong>${t.name}</strong> | Tagok: ${t.members.join(', ')}`;
      if(isAdmin){
        li.innerHTML += `<br>Válaszok: ${t.answers.join(' | ')}`;
        const btn = document.createElement('button');
        btn.textContent = 'Törlés';
        btn.className='admin-btn';
        btn.onclick = ()=>{ teams.splice(i,1); localStorage.setItem('teams',JSON.stringify(teams)); loadTeams(); };
        li.appendChild(btn);
      }
      ul.appendChild(li);
    });
  }

  // admin belépés
  document.getElementById('btnAdminLogin').onclick = ()=>{
    if(document.getElementById('adminPw').value===ADMIN_PW){
      isAdmin=true;
      document.getElementById('msgAdmin').textContent='Admin belépve';
      show('teamsSec');
      loadTeams();
    } else {
      document.getElementById('msgAdmin').textContent='Hibás jelszó';
    }
  };

  // induláskor
  window.onload = ()=>{
    show('registerSec');
    const name = localStorage.getItem('logged');
    if(name) document.getElementById('msgWelcome').textContent=`Üdvözlünk, ${name}!`;
  };
</script>

</body>
</html>

