<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <title>KCSSPNR Vetélkedő</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron&display=swap');
    body {
      margin: 0;
      min-height: 100vh;
      background: #000;
      color: #0f0;
      font-family: 'Orbitron', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px 20px;
    }
    h1 {
      font-size: 3rem;
      color: #0ff;
      text-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
      margin-bottom: 40px;
      text-align: center;
    }
    nav {
      display: flex;
      gap: 20px;
      margin-bottom: 40px;
      flex-wrap: wrap;
      justify-content: center;
    }
    button {
      background: transparent;
      border: 2px solid #0ff;
      color: #0ff;
      padding: 15px 30px;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 2px;
    }
    button:hover, button:focus {
      background: #0ff;
      color: #000;
    }
    section {
      background: #010101;
      border: 2px solid #0f0;
      border-radius: 12px;
      padding: 30px 40px;
      width: 100%;
      max-width: 550px;
      display: none;
      flex-direction: column;
    }
    section.active { display: flex; }
    label { margin-top: 15px; font-weight: 600; font-size: 1.1rem; }
    input {
      margin-top: 5px;
      padding: 10px 15px;
      font-size: 1rem;
      background: #000;
      border: 2px solid #0ff;
      border-radius: 8px;
      color: #0f0;
      width: 100%;
    }
    #welcomeMsg, #adminStatus {
      margin-top: 25px;
      font-size: 1.2rem;
      font-weight: 700;
      text-align: center;
    }
    ul#teamList {
      list-style: none;
      padding-left: 0;
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid #0ff;
      border-radius: 8px;
    }
    ul#teamList li {
      padding: 12px 15px;
      border-bottom: 1px solid #0f0;
      font-size: 1.1rem;
    }
    ul#teamList li:last-child { border-bottom: none; }
  </style>
</head>
<body>
  <h1>KCSSPNR Vetélkedő</h1>
  <nav>
    <button id="btnRegister">Csapat regisztrálása</button>
    <button id="btnTeams">Nevezett csapatok</button>
    <button id="btnAdminLogin">Bejelentkezés (admin)</button>
  </nav>
  <section id="registerSection">
    <h2>Csapat regisztrálása</h2>
    <label for="teamName">Csapatnév:</label>
    <input type="text" id="teamName" />
    <label for="member1">Tag 1:</label>
    <input type="text" id="member1" />
    <label for="member2">Tag 2:</label>
    <input type="text" id="member2" />
    <label for="member3">Tag 3:</label>
    <input type="text" id="member3" />
    <label for="member4">Tag 4:</label>
    <input type="text" id="member4" />
    <label for="teamPassword">Jelszó:</label>
    <input type="password" id="teamPassword" />
    <button id="registerBtn">Regisztráció</button>
    <p id="welcomeMsg"></p>
  </section>
  <section id="teamsSection">
    <h2>Nevezett csapatok</h2>
    <ul id="teamList"></ul>
  </section>
  <section id="adminSection">
    <h2>Admin bejelentkezés</h2>
    <label for="adminPassword">Jelszó:</label>
    <input type="password" id="adminPassword" />
    <button id="adminLoginBtn">Bejelentkezés</button>
    <p id="adminStatus"></p>
  </section>
  <script>
    let isAdmin = false;
    const ADMIN_PASSWORD = "wPk4ibAwk";

    function showSection(id) {
      document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    function loadTeamsFromStorage() {
      const data = localStorage.getItem("kcsspnr_teams");
      return data ? JSON.parse(data) : [];
    }

    function saveTeamsToStorage(teams) {
      localStorage.setItem("kcsspnr_teams", JSON.stringify(teams));
    }

    function setCurrentTeam(name) {
      localStorage.setItem("kcsspnr_currentTeam", name);
    }

    function getCurrentTeam() {
      return localStorage.getItem("kcsspnr_currentTeam");
    }

    function updateWelcomeMsg() {
      const currentTeam = getCurrentTeam();
      const msg = document.getElementById("welcomeMsg");
      msg.textContent = currentTeam ? `Üdvözlünk titeket, ${currentTeam} csapat!` : "";
    }

    function renderTeamList() {
      const teams = loadTeamsFromStorage();
      const ul = document.getElementById("teamList");
      ul.innerHTML = "";
      if (teams.length === 0) {
        ul.innerHTML = "<li>Jelenleg nincs nevezett csapat.</li>";
        return;
      }
      teams.forEach((team, index) => {
        const li = document.createElement("li");
        li.textContent = `${team.name} - Tagok: ${team.members.join(", ")}`;
        if (isAdmin) {
          const delBtn = document.createElement("button");
          delBtn.textContent = "❌";
          delBtn.style.marginLeft = "10px";
          delBtn.onclick = () => {
            if (confirm(`Biztosan törlöd a(z) ${team.name} csapatot?`)) {
              teams.splice(index, 1);
              saveTeamsToStorage(teams);
              renderTeamList();
            }
          };
          li.appendChild(delBtn);
        }
        ul.appendChild(li);
      });
    }

    document.getElementById("registerBtn").addEventListener("click", () => {
      const name = document.getElementById("teamName").value.trim();
      const members = ["member1", "member2", "member3", "member4"].map(id => document.getElementById(id).value.trim());
      const password = document.getElementById("teamPassword").value;
      if (!name || members.includes("") || !password) {
        alert("Tölts ki minden mezőt!");
        return;
      }
      const teams = loadTeamsFromStorage();
      if (teams.find(t => t.name.toLowerCase() === name.toLowerCase())) {
        alert("Ez a csapatnév már foglalt!");
        return;
      }
      teams.push({ name, members, password });
      saveTeamsToStorage(teams);
      setCurrentTeam(name);
      updateWelcomeMsg();
      ["teamName", "member1", "member2", "member3", "member4", "teamPassword"].forEach(id => document.getElementById(id).value = "");
    });

    document.getElementById("adminLoginBtn").addEventListener("click", () => {
      const pass = document.getElementById("adminPassword").value;
      const status = document.getElementById("adminStatus");
      if (pass === ADMIN_PASSWORD) {
        isAdmin = true;
        status.style.color = "lime";
        status.textContent = "Sikeres admin bejelentkezés!";
        renderTeamList();
      } else {
        status.style.color = "red";
        status.textContent = "Hibás jelszó!";
      }
    });

    document.getElementById("btnRegister").onclick = () => { showSection("registerSection"); updateWelcomeMsg(); };
    document.getElementById("btnTeams").onclick = () => { showSection("teamsSection"); renderTeamList(); };
    document.getElementById("btnAdminLogin").onclick = () => { showSection("adminSection"); document.getElementById("adminStatus").textContent = ""; };

    showSection("registerSection");
    updateWelcomeMsg();
  </script>
</body>
</html>
