<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>KCSSPNR Vetélkedő</title>
  <style>
    /* ... A TE EREDETI STÍLUSAID IDE KERÜLNEK ... (megtartva, nem ismétlem itt a hely szűke miatt) */
  </style>

  <!-- Firebase SDK-k -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>
<body>

  <h1>KCSSPNR Vetélkedő</h1>
  <nav>
    <button onclick="show('register')">Regisztráció</button>
    <button onclick="show('rules')">Szabályzat</button>
    <button onclick="promptCode()">Nevezett csapatok</button>
  </nav>

  <!-- Regisztráció -->
  <section id="register">
    <h2>Csapat regisztrálása</h2>
    <input id="teamName" placeholder="Csapatnév">
    <input id="member1" placeholder="Tag 1">
    <input id="member2" placeholder="Tag 2">
    <input id="member3" placeholder="Tag 3">
    <input id="member4" placeholder="Tag 4">
    <button onclick="registerTeam()">Regisztráció</button>
    <p id="msgRegister"></p>
  </section>

  <!-- Szabályzat -->
  <section id="rules">
    <!-- A TE EREDETI SZABÁLYZATOD MARAD ITT -->
    <h2>Szabályzat</h2>
    <p>A vetélkedő során szükséges legalább egy mobilinternettel rendelkező telefon.</p>
    <!-- stb... -->
  </section>

  <!-- Kód bekérés -->
  <section id="codeSection">
    <h2>Admin kód szükséges</h2>
    <input id="adminCode" type="password" placeholder="Írd be a kódot">
    <button onclick="checkCode()">Belépés</button>
    <p id="msgCode"></p>
  </section>

  <!-- Csapatok -->
  <section id="teams">
    <h2>Nevezett csapatok</h2>
    <ul id="teamsList"></ul>
  </section>

<script>
  // Firebase konfiguráció
  const firebaseConfig = {
    apiKey: "AIzaSyBDNfbKRe9IBAnTKHoSGj06dWULk3i_kag",
    authDomain: "segitsegkozpont.firebaseapp.com",
    databaseURL: "https://segitsegkozpont-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "segélyközpont",
    storageBucket: "biztonságkozpont.firebasestorage.app",
    messagingSenderId: "910810037566",
    appId: "1:910810037566:web:e57224248142edd41b406f",
    measurementId: "G-40D2D72G83"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const PROTECT_CODE = "wPk4ib";

  function show(id) {
    document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if (id === 'teams') renderTeams();
  }

  function registerTeam() {
    const name = document.getElementById('teamName').value.trim();
    const members = [1,2,3,4].map(i => document.getElementById('member'+i).value.trim());
    if (!name || members.some(m => !m)) {
      document.getElementById('msgRegister').textContent = 'Töltsd ki az összes mezőt!';
      return;
    }

    const teamRef = db.ref('teams/' + name.toLowerCase());
    teamRef.once('value').then(snapshot => {
      if (snapshot.exists()) {
        document.getElementById('msgRegister').textContent = 'Ez a név már foglalt!';
      } else {
        teamRef.set({ name, members }).then(() => {
          document.getElementById('msgRegister').textContent = `Regisztráció sikeres: ${name}`;
        });
      }
    });
  }

  function promptCode() {
    show('codeSection');
    document.getElementById('msgCode').textContent = '';
    document.getElementById('adminCode').value = '';
  }

  function checkCode() {
    const v = document.getElementById('adminCode').value;
    if (v === PROTECT_CODE) {
      show('teams');
    } else {
      document.getElementById('msgCode').textContent = 'Hibás kód!';
    }
  }

  function renderTeams() {
    const ul = document.getElementById('teamsList');
    ul.innerHTML = '<li>Betöltés...</li>';
    db.ref('teams').once('value').then(snapshot => {
      const data = snapshot.val();
      ul.innerHTML = '';
      if (!data) {
        ul.innerHTML = '<li>— nincs csapat —</li>';
        return;
      }
      Object.entries(data).forEach(([key, t]) => {
        const li = document.createElement('li');
        const span = document.createElement('span');
        span.textContent = `${t.name} — Tagok: ${t.members.join(', ')}`;
        const btn = document.createElement('button');
        btn.textContent = 'Törlés';
        btn.className = 'delete-btn';
        btn.onclick = () => {
          db.ref('teams/' + key).remove().then(renderTeams);
        };
        li.appendChild(span);
        li.appendChild(btn);
        ul.appendChild(li);
      });
    });
  }

  window.onload = () => show('register');
</script>
</body>
</html>





