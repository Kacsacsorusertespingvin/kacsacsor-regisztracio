<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>KCSSPNR Vetélkedő</title>
  <style>
    body { margin:0; background:#000; color:#0f0; font-family:monospace; display:flex; flex-direction:column; align-items:center; padding:20px; }
    nav { margin-bottom:20px; }
    button { margin:5px; background:transparent; border:2px solid #0ff; color:#0ff; padding:8px 16px; cursor:pointer; }
    button:hover { background:#0ff; color:#000; }
    section { display:none; width:100%; max-width:500px; margin-top:20px; }
    section.active { display:block; }
    input { width:100%; margin:8px 0; padding:8px; background:#111; border:2px solid #0ff; color:#0f0; }
    ul { list-style:none; padding:0; }
    li { background:#111; margin:8px 0; padding:8px; border:1px solid #0ff; }
    .admin-btn { margin-left:10px; background:#300; border:none; color:#f00; cursor:pointer; }
    #msg { text-align:center; margin:10px 0; }
  </style>
</head>
<body>

  <h1>KCSSPNR Vetélkedő</h1>
  <nav>
    <button onclick="show('registerSection')">Regisztráció</button>
    <button onclick="show('answersSection')">Válaszok</button>
    <button onclick="show('teamsSection')">Nevezett csapatok</button>
    <button onclick="show('adminSection')">Admin</button>
  </nav>

  <!-- Csapat regisztráció -->
  <section id="registerSection">
    <h2>Csapat regisztrálása</h2>
    <input id="teamName" placeholder="Csapatnév">
    <input id="member1" placeholder="Tag 1">
    <input id="member2" placeholder="Tag 2">
    <input id="member3" placeholder="Tag 3">
    <input id="member4" placeholder="Tag 4">
    <button onclick="registerTeam()">Regisztráció</button>
    <p id="msgRegister"></p>
  </section>

  <!-- Válaszok beadása -->
  <section id="answersSection">
    <h2>Válaszok beadása</h2>
    <input id="ans1" type="number" placeholder="Hangérzékelők">
    <input id="ans2" type="number" placeholder="Hőkamerák">
    <input id="ans3" type="number" placeholder="Kamerák">
    <input id="ans4" type="number" placeholder="Mozgásérzékelők">
    <button onclick="submitAnswers()">Mentés</button>
    <p id="msgAnswers"></p>
  </section>

  <!-- Csapatok listája (mindenki) -->
  <section id="teamsSection">
    <h2>Nevezett csapatok</h2>
    <ul id="teamsList"></ul>
  </section>

  <!-- Admin bejelentkezés -->
  <section id="adminSection">
    <h2>Admin</h2>
    <input id="adminPw" type="password" placeholder="Admin jelszó">
    <button onclick="loginAdmin()">Belépés</button>
    <p id="msgAdmin"></p>
    <button id="manageBtn" style="display:none;" onclick="show('manageSection')">Csapatok kezelése</button>
  </section>

  <!-- Admin csapatkezelés -->
  <section id="manageSection">
    <h2>Csapatok kezelése</h2>
    <ul id="manageList"></ul>
  </section>

<script>
  const ADMIN_PW = "wPk4ibAwk";
  let isAdmin = false;

  function show(id) {
    document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if(id==='teamsSection') renderTeamsList();
    if(id==='answersSection') loadAnswers();
    if(id==='manageSection') renderManageList();
  }

  // Regisztráció
  function registerTeam(){
    const name = document.getElementById('teamName').value.trim();
    const members = [1,2,3,4].map(i=>document.getElementById('member'+i).value.trim());
    if(!name||members.some(m=>!m)){ alert('Töltsd ki az összes mezőt!'); return; }
    let teams = JSON.parse(localStorage.getItem('teams')||'[]');
    if(teams.find(t=>t.name.toLowerCase()===name.toLowerCase())){
      alert('Ez a név már foglalt!'); return;
    }
    teams.push({name,members,answers:['','','','']});
    localStorage.setItem('teams',JSON.stringify(teams));
    localStorage.setItem('loggedTeam',name);
    document.getElementById('msgRegister').textContent = `Üdvözlünk, ${name}!`;
  }

  // Válaszok betöltése/mentése
  function loadAnswers(){
    const name = localStorage.getItem('loggedTeam');
    if(!name){ alert('Regisztrálj előbb!'); return; }
    let teams = JSON.parse(localStorage.getItem('teams')||'[]');
    const t = teams.find(t=>t.name===name);
    ['ans1','ans2','ans3','ans4'].forEach((id,i)=>{
      document.getElementById(id).value = t.answers[i]||'';
    });
  }
  function submitAnswers(){
    const name = localStorage.getItem('loggedTeam');
    if(!name){ alert('Regisztrálj előbb!'); return; }
    let teams = JSON.parse(localStorage.getItem('teams')||'[]');
    const t = teams.find(t=>t.name===name);
    t.answers = ['ans1','ans2','ans3','ans4'].map(id=>document.getElementById(id).value);
    localStorage.setItem('teams',JSON.stringify(teams));
    document.getElementById('msgAnswers').textContent='Mentve!';
  }

  // Mindenki láthatja
  function renderTeamsList(){
    const ul = document.getElementById('teamsList');
    ul.innerHTML='';
    let teams = JSON.parse(localStorage.getItem('teams')||'[]');
    if(!teams.length){ ul.innerHTML='<li>— nincs csapat —</li>'; return; }
    teams.forEach(t=>{
      const li=document.createElement('li');
      li.textContent = `${t.name}: ${t.members.join(', ')}`;
      ul.appendChild(li);
    });
  }

  // Admin
  function loginAdmin(){
    if(document.getElementById('adminPw').value===ADMIN_PW){
      isAdmin=true;
      localStorage.setItem('isAdmin','true');
      document.getElementById('msgAdmin').textContent='Sikeres bejelentkezés';
      document.getElementById('manageBtn').style.display='inline-block';
    } else {
      document.getElementById('msgAdmin').textContent='Hibás jelszó';
    }
  }

  // Admin csapatkezelés
  function renderManageList(){
    const ul = document.getElementById('manageList');
    ul.innerHTML='';
    let teams = JSON.parse(localStorage.getItem('teams')||'[]');
    if(!teams.length){ ul.innerHTML='<li>— nincs csapat —</li>'; return; }
    teams.forEach((t,i)=>{
      const li=document.createElement('li');
      const ans = t.answers.map(a=>a||'-').join(' | ');
      li.innerHTML = `<strong>${t.name}</strong> — Válaszok: ${ans}`;
      const btn = document.createElement('button');
      btn.textContent='Törlés';
      btn.className='admin-btn';
      btn.onclick=()=>{
        teams.splice(i,1);
        localStorage.setItem('teams',JSON.stringify(teams));
        renderManageList();
      };
      li.appendChild(btn);
      ul.appendChild(li);
    });
  }

  // Oldalbetöltés
  window.onload = ()=>{
    if(localStorage.getItem('isAdmin')==='true'){
      isAdmin=true;
      document.getElementById('manageBtn').style.display='inline-block';
    }
    show('registerSection');
  };
</script>

</body>
</html>



