<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>KCSSPNR Vetélkedő</title>
  <style>
    body { margin:0; background:#000; color:#0f0; font-family:monospace; display:flex; flex-direction:column; align-items:center; padding:20px; }
    nav { margin-bottom:20px; }
    button { margin:5px; background:transparent; border:2px solid #0ff; color:#0ff; padding:8px 16px; cursor:pointer; }
    button:hover { background:#0ff; color:#000; }
    section { display:none; width:100%; max-width:500px; margin-top:20px; }
    section.active { display:block; }
    input { width:100%; margin:8px 0; padding:8px; background:#111; border:2px solid #0ff; color:#0f0; }
    ul { list-style:none; padding:0; }
    li { background:#111; margin:8px 0; padding:8px; border:1px solid #0ff; display:flex; justify-content:space-between; align-items:center; }
    .delete-btn { background:#300; border:none; color:#f00; cursor:pointer; padding:4px 8px; }
    #msg { text-align:center; margin:10px 0; }
  </style>
</head>
<body>

  <h1>KCSSPNR Vetélkedő</h1>
  <nav>
    <button onclick="show('register')">Regisztráció</button>
    <button onclick="promptCode()">Nevezett csapatok</button>
  </nav>

  <!-- 1. Regisztráció -->
  <section id="register">
    <h2>Csapat regisztrálása</h2>
    <input id="teamName" placeholder="Csapatnév">
    <input id="member1" placeholder="Tag 1">
    <input id="member2" placeholder="Tag 2">
    <input id="member3" placeholder="Tag 3">
    <input id="member4" placeholder="Tag 4">
    <button onclick="registerTeam()">Regisztráció</button>
    <p id="msgRegister"></p>
  </section>

  <!-- 2. Kód megadása -->
  <section id="codeSection">
    <h2>Admin kód szükséges</h2>
    <input id="adminCode" type="password" placeholder="Írd be a kódot">
    <button onclick="checkCode()">Belépés</button>
    <p id="msgCode"></p>
  </section>

  <!-- 3. Csapatok kezelése -->
  <section id="teams">
    <h2>Nevezett csapatok</h2>
    <ul id="teamsList"></ul>
  </section>

<script>
  const PROTECT_CODE = "wPk4ib";

  function show(id) {
    document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if (id === 'teams') renderTeams();
  }

  // Regisztráció
  function registerTeam(){
    const name = document.getElementById('teamName').value.trim();
    const members = [1,2,3,4].map(i=>document.getElementById('member'+i).value.trim());
    if(!name||members.some(m=>!m)){
      document.getElementById('msgRegister').textContent = 'Töltsd ki az összes mezőt!';
      return;
    }
    let teams = JSON.parse(localStorage.getItem('teams')||'[]');
    if(teams.some(t=>t.name.toLowerCase()===name.toLowerCase())){
      document.getElementById('msgRegister').textContent = 'Ez a név már foglalt!';
      return;
    }
    teams.push({name,members});
    localStorage.setItem('teams', JSON.stringify(teams));
    document.getElementById('msgRegister').textContent = `Regisztráció sikeres: ${name}`;
  }

  // Védett rész előkészítése
  function promptCode(){
    show('codeSection');
    document.getElementById('msgCode').textContent = '';
    document.getElementById('adminCode').value = '';
  }

  function checkCode(){
    const v = document.getElementById('adminCode').value;
    if(v === PROTECT_CODE){
      show('teams');
    } else {
      document.getElementById('msgCode').textContent = 'Hibás kód!';
    }
  }

  // Csapatok listázása és törlés
  function renderTeams(){
    const ul = document.getElementById('teamsList');
    ul.innerHTML = '';
    let teams = JSON.parse(localStorage.getItem('teams')||'[]');
    if(!teams.length){
      ul.innerHTML = '<li>— nincs csapat —</li>'; 
      return;
    }
    teams.forEach((t,i)=>{
      const li = document.createElement('li');
      const span = document.createElement('span');
      span.textContent = `${t.name} — Tagok: ${t.members.join(', ')}`;
      const btn = document.createElement('button');
      btn.textContent = 'Törlés';
      btn.className = 'delete-btn';
      btn.onclick = ()=>{
        teams.splice(i,1);
        localStorage.setItem('teams', JSON.stringify(teams));
        renderTeams();
      };
      li.appendChild(span);
      li.appendChild(btn);
      ul.appendChild(li);
    });
  }

  // Init
  window.onload = ()=> show('register');
</script>

</body>
</html>




